/*1352211173,178142543*/

if (self.CavalryLogger) { CavalryLogger.start_js(["HGyDP"]); }

__d("PluginRecommendationsBar",["function-extensions","event-extensions","Arbiter","CSS","DOM","Form","Plugin","PluginConnection","PluginPerms","PluginResize","UnverifiedXD","copyProperties","curry"],function(a,b,c,d,e,f){b('function-extensions');b('event-extensions');var g=b('Arbiter'),h=b('CSS'),i=b('DOM'),j=b('Form'),k=b('Plugin'),l=b('PluginConnection'),m=b('PluginPerms'),n=b('PluginResize'),o=b('UnverifiedXD'),p=b('copyProperties'),q=b('curry');function r(){}r.ACTION='Connect.Unsafe.platform/plugins/recommendations_bar/action';r.TRIGGER='Connect.Unsafe.platform/plugins/recommendations_bar/trigger';r.CREATE_READ='platform/plugins/recommendations_bar/create_read';r.DELETE_READ='platform/plugins/recommendations_bar/delete_read';r.OPEN='platform/plugins/recommendations_bar/open';function s(u){var v=function(){v=bagof(u());};return function(){return v();};}var t=[r.ACTION,r.TRIGGER];p(r.prototype,{init:function(u,v){this.element=u;var w=new n(function(){return v.offsetWidth+2;},function(){return u.offsetHeight;});w.resize().auto();this.resizer=w;g.registerCallback(q(g.inform,r.OPEN),t);g.subscribe(r.OPEN,function(){h.addClass(u,'pluginRecommendationsBarOpen');o.send({type:'signal_animation'});w.resize();});},initReadToggle:function(u,v,w,x,y,z){Event.listen(w,'click',q(j.bootstrap,x.getRoot()));Event.listen(w,'click',u.show.bind(u,y.id));Event.listen(y,'click',q(j.bootstrap,z.getRoot()));Event.listen(y,'click',u.show.bind(u,w.id));},initPerms:function(u,v){Event.listen(u,'click',m.starter('recommendations_bar',v,['publish_actions']));},initRead:function(u){g.subscribe(r.OPEN,s(q(j.bootstrap,u.getRoot())));},initOpenLog:function(u){g.subscribe(r.OPEN,s(q(j.bootstrap,u.getRoot())));},initRecommendation:function(u,v,w,x,y){var z=s(q(j.bootstrap,u.getRoot()));g.subscribe(t,z);Event.listen(x,'click',z);Event.listen(x,'click',q(h.addClass,this.element,'pluginRecommendationsBarOpen'));Event.listen(y,'click',function(event){if(w.showing()!=v){w.show(v);}else h.removeClass(this.element,'pluginRecommendationsBarOpen');this.resizer.resize();return true;}.bind(this));},initLike:function(u,v,w,x){var y=new l().init(u,v,'pluginRecommendationsBarButtonDepressed');Event.listen(v,'click',function(event){j.bootstrap((y.connected()?x:w).getRoot());y.toggle();return true;});},initError:function(u,v){g.subscribe(k.ERROR,function(event,w){i.setContent(u,w.content);v.show(u.id);h.addClass(this.element,'pluginRecommendationsBarOpen');this.resizer.resize();}.bind(this));}});e.exports=r;});
__d("PluginStack",["CSS","DOM","copyProperties","createArrayFrom"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('copyProperties'),j=b('createArrayFrom');function k(l,m){this._container=l;this._showing=m;}i(k.prototype,{show:function(l){this.hideAll();g.show(h.find(this.container(),'#'+l));this._showing=l;return this;},hideAll:function(){this.children().forEach(g.hide,g);return this;},container:function(){return this._container;},children:function(){return j(this.container().childNodes);},showing:function(){return this._showing;}});e.exports=k;});
__d("legacy:PluginRecommendationsBar-legacy",["Plugin","PluginRecommendationsBar"],function(a,b,c,d){if(!a.Plugin||!a.Plugin.CONNECT)a.Plugin=b('Plugin');a.Plugin.RecommendationsBar=b('PluginRecommendationsBar');},3);
__d("legacy:PluginStack-legacy",["Plugin","PluginStack"],function(a,b,c,d){if(!a.Plugin||!a.Plugin.CONNECT)a.Plugin=b('Plugin');a.Plugin.Stack=b('PluginStack');},3);