<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="robots" content="index,nofollow">

<title>ApacheMySQLPHP - Community Ubuntu Documentation</title>
<script type="text/javascript" src="ApacheMySQLPHP_files/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="ApacheMySQLPHP_files/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="ApacheMySQLPHP_files/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="ApacheMySQLPHP_files/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="ApacheMySQLPHP_files/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static192/light/css/msie.css">
<![endif]-->





<link rel="Start" href="https://help.ubuntu.com/community/UserDocumentation">
<link rel="Alternate" title="Wiki Markup" href="https://help.ubuntu.com/community/ApacheMySQLPHP?action=raw">
<link rel="Alternate" media="print" title="Print View" href="https://help.ubuntu.com/community/ApacheMySQLPHP?action=print">
<link rel="Search" href="https://help.ubuntu.com/community/FindPage">
<link rel="Index" href="https://help.ubuntu.com/community/TitleIndex">
<link rel="Glossary" href="https://help.ubuntu.com/community/WordIndex">
<link rel="Help" href="https://help.ubuntu.com/community/HelpOnFormatting">
</head>

<body dir="ltr" lang="en">


    <div id="leftbanner">
    </div>
    <div id="rightbanner">
    </div>
    <div id="container">
        <div id="container-inner">
	    <div id="mothership">
		<ul>
	            <li><a href="http://www.ubuntu.com/partners">Partners</a> </li>
        	    <li><a href="http://www.ubuntu.com/support">Support</a></li>
        	    <li><a href="http://www.ubuntu.com/community">Community</a></li>
        	    <li><a href="http://www.ubuntu.com/">Ubuntu.com</a></li>
	        </ul>
	    </div>
            <div id="header">
                <h1 id="ubuntu-header"><a href="https://help.ubuntu.com/">Ubuntu Documentation</a></h1>
                <ul id="main-menu">
                    <li><a href="https://help.ubuntu.com/">Official Documentation</a></li>
                    <li><a class="main-menu-item current" href="https://help.ubuntu.com/community">Community Help Wiki</a></li>
                </ul>
            </div>
            <div id="menu-search">
                <div id="subheader"> 
                    <div class="subheader-menu"> 
                        <div id="second-nav">
<ul id="username"><li><a href="https://help.ubuntu.com/community/ApacheMySQLPHP?action=login&amp;login=1" id="login" rel="nofollow">Login to edit</a></li></ul>
 </div> 
    <div id="user-info"> 
    </div>
 

                            
                        </div> 
                    </div> 


                    <div id="search-box">

<noscript>
 <form action="http://www.google.com/cse" id="cse-search-box">
   <div>
     <input type="hidden" name="cx" value="004599128559784038176:vj_p0xo-nng" />
     <input type="hidden" name="ie" value="UTF-8" />
     <input type="text" name="q" size="21" />
     <input type="submit" name="sa" value="Search" />
   </div>
 </form>
</noscript>

<script>
 document.write('<form action="https://help.ubuntu.com/search.html" id="cse-search-box">');
 document.write('  <div>');
 document.write('    <input type="hidden" name="cof" value="FORID:9" />');
 document.write('    <input type="hidden" name="cx" value="004599128559784038176:vj_p0xo-nng" />');
 document.write('    <input type="hidden" name="ie" value="UTF-8" />');
 document.write('    <input type="text" name="q" size="21" />');
 document.write('    <input type="submit" name="sa" value="Search" />');
 document.write('  </div>');
 document.write('</form>');
</script><form action="https://help.ubuntu.com/search.html" id="cse-search-box">  <div>    <input name="cof" value="FORID:9" type="hidden">    <input name="cx" value="004599128559784038176:vj_p0xo-nng" type="hidden">    <input name="ie" value="UTF-8" type="hidden">    <input name="q" size="21" type="text">    <input name="sa" value="Search" type="submit">  </div></form>


                    </div>
                </div>
                <div id="title"><h1>
<span id="pagelocation"><a class="backlink" href="https://help.ubuntu.com/community/ApacheMySQLPHP?action=fullsearch&amp;value=linkto%3A%22ApacheMySQLPHP%22&amp;context=180" rel="nofollow" title="Click to do a full-text search for this title">ApacheMySQLPHP</a></span>
</h1>
                </div>
            <div id="cwt-nav3">

 <hr class="clear">
            </div>
                <div id="cwt-content" class="clearfix content-area">

<div id="page" dir="ltr" lang="en">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line867">
</p><h3 id="Hint:_Server_Guide">Hint: Server Guide</h3>
<span class="anchor" id="line-2"></span><p class="line862">To find the Ubuntu Server Guide related to your specific version, please go to: <a class="https" href="https://help.ubuntu.com/">https://help.ubuntu.com/</a>, select your Ubuntu version and then click on <strong>Ubuntu Server Guide</strong>. For the latest LTS version (12.04 LTS) of Ubuntu Server, please go to <a class="https" href="https://help.ubuntu.com/12.04/serverguide/index.html">https://help.ubuntu.com/12.04/serverguide/index.html</a> <span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span></p><p class="line862">Parent page: <a href="https://help.ubuntu.com/community/Programming">Programming Applications</a> <span class="anchor" id="line-5"></span><span class="anchor" id="line-6"></span></p><div><table style="float: right; font-size: 0.9em; width: 40%; background: none repeat scroll 0% 0% rgb(241, 241, 237); margin: 0pt 0pt 1em 1em;"><tbody><tr>  <td style="padding: 0.5em;"><p class="line891"></p><div class="table-of-contents"><p class="table-of-contents-heading">Contents</p><ol><li><ol><li>
<a href="#Hint:_Server_Guide">Hint: Server Guide</a></li></ol></li><li>
<a href="#To_install_the_default_LAMP_stack_in_Ubuntu_10.04_and_above">To install the default LAMP stack in Ubuntu 10.04 and above</a></li><li>
<a href="#Starting_over:_How_to_remove_the_LAMP_stack">Starting over: How to remove the LAMP stack</a></li><li>
<a href="#Installing_Apache_2">Installing Apache 2</a><ol><li>
<a href="#Checking_Apache_2_installation">Checking Apache 2 installation</a></li><li>
<a href="#Troubleshooting_Apache">Troubleshooting Apache</a></li><li>
<a href="#Virtual_Hosts">Virtual Hosts</a></li></ol></li><li>
<a href="#Installing_PHP_5">Installing PHP 5</a><ol><li>
<a href="#Checking_PHP_5_installation">Checking PHP 5 installation</a></li><li>
<a href="#Troubleshooting_PHP_5">Troubleshooting PHP 5</a></li><li>
<a href="#php.ini_development_vs._production">php.ini development vs. production</a></li><li>
<a href="#PHP_in_user_directories">PHP in user directories</a></li></ol></li><li>
<a href="#Installing_MYSQL_with_PHP_5">Installing MYSQL with PHP 5</a></li><li>
<a href="#After_installing_PHP">After installing PHP</a></li><li>
<a href="#After_installing_MySQL">After installing MySQL</a><ol><li>
<a href="#Set_mysql_bind_address">Set mysql bind address</a></li><li>
<a href="#Set_mysql_root_password">Set mysql root password</a></li><li>
<a href="#Create_a_mysql_database">Create a mysql database</a></li><li>
<a href="#Create_a_mysql_user">Create a mysql user</a></li><li>
<a href="#Backup-Settings">Backup-Settings</a></li><li>
<a href="#Alternatively">Alternatively</a></li></ol></li><li>
<a href="#Phpmyadmin_and_mysql-admin">Phpmyadmin and mysql-admin</a><ol><li>
<a href="#Troubleshooting_Phpmyadmin_.26_mysql-admin">Troubleshooting Phpmyadmin &amp; mysql-admin</a></li><li>
<a href="#Alternative:_install_phpMyAdmin_from_source">Alternative: install phpMyAdmin from source</a></li><li>
<a href="#Mysql-admin">Mysql-admin</a></li><li>
<a href="#For_more_information">For more information</a></li></ol></li><li>
<a href="#Edit_Apache_Configuration">Edit Apache Configuration</a></li><li>
<a href="#Installing_suPHP">Installing suPHP</a></li><li>
<a href="#Run.2C_Stop.2C_Test.2C_And_Restart_Apache">Run, Stop, Test, And Restart Apache</a></li><li>
<a href="#Using_Apache">Using Apache</a></li><li>
<a href="#Status">Status</a></li><li>
<a href="#Securing_Apache">Securing Apache</a></li><li>
<a href="#Password-Protect_a_Directory">Password-Protect a Directory</a><ol><li>
<a href="#Password-Protect_a_Directory_With_.htaccess">Password-Protect a Directory With .htaccess</a></li></ol></li><li>
<a href="#thumbnails">thumbnails</a></li><li>
<a href="#Known_problems">Known problems</a><ol><li>
<a href="#Skype_incompatibility">Skype incompatibility</a></li></ol></li><li>
<a href="#Other_Apache_Options">Other Apache Options</a></li><li>
<a href="#Further_Information">Further Information</a></li></ol></div></td>
</tr>
</tbody></table></div><span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span><p class="line862">This is to help people setup and install a <a class="http" href="http://en.wikipedia.org/wiki/LAMP_%28software_bundle%29">LAMP</a> (<strong>L</strong>inux-<strong>A</strong>pache-<strong>M</strong>ySQL-<strong>P</strong>HP) server in Ubuntu, including Apache 2, PHP 5 and MySQL 4.1 or 5.0. <span class="anchor" id="line-9"></span><span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span></p><p class="line867">
</p><h2 id="To_install_the_default_LAMP_stack_in_Ubuntu_10.04_and_above">To install the default LAMP stack in Ubuntu 10.04 and above</h2>
<span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span><p class="line874">First install tasksel... <span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span></p><p class="line867"><span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span></p><pre><span class="anchor" id="line-1"></span>$ sudo apt-get install tasksel</pre><span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><p class="line874">... and then the LAMP stack: <span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span></p><p class="line867"><span class="anchor" id="line-23"></span><span class="anchor" id="line-24"></span></p><pre><span class="anchor" id="line-1-1"></span>$ sudo tasksel install lamp-server</pre><span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span><p class="line862">See  <a href="https://help.ubuntu.com/community/Tasksel">Tasksel</a> - be warned, only use tasksel to install tasks, not to remove them - see <a class="https" href="https://launchpad.net/bugs/574287">https://launchpad.net/bugs/574287</a> <span class="anchor" id="line-27"></span><br>
<strong>DO NOT UNCHECK ANY PACKAGES IN THE MENU WHICH APPEARS</strong><br>
 <span class="anchor" id="line-28"></span>You can leave your system in an unusable state. <span class="anchor" id="line-29"></span>
</p><h2 id="Starting_over:_How_to_remove_the_LAMP_stack">Starting over: How to remove the LAMP stack</h2>
<span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><p class="line874">To remove the LAMP stack remove the following packages: <span class="anchor" id="line-32"></span></p><ul><li>Note:
 This assumes you have no other programs that require any of these 
packages.  You might wish to simulate this removal first, and only 
remove the packages that don't cause removal of something desired. <span class="anchor" id="line-33"></span></li></ul><p class="line867"><span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span></p><pre><span class="anchor" id="line-1-2"></span>apache2 apache2-mpm-prefork apache2-utils apache2.2-common libapache2-mod-php5 libapr1 libaprutil1 libdbd-mysql-perl libdbi-perl libnet-daemon-perl libplrpc-perl libpq5 mysql-client-5.5 mysql-common mysql-server mysql-server-5.5 php5-common php5-mysql</pre><span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span><p class="line874">To
 also remove the debconf data, use the purge option when removing.  To 
get rid of any configurations you may have made to apache, manually 
remove the /etc/apache2 directory once the packages have been removed. <span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span></p><p class="line874">You may also want to purge these packages: <span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span></p><pre><span class="anchor" id="line-1-3"></span>mysql-client-core-5.5 mysql-server-core-5.5</pre><span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><p class="line867">
</p><h2 id="Installing_Apache_2">Installing Apache 2</h2>
<span class="anchor" id="line-45"></span><p class="line862">To only install the apache2 webserver, use <a href="https://help.ubuntu.com/community/InstallingSoftware">any method</a> to install: <span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span></p><p class="line867"><span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span></p><pre><span class="anchor" id="line-1-4"></span>apache2</pre><span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span><p class="line874">It requires a restart for it to work: <span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span></p><p class="line867"><span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span></p><pre><span class="anchor" id="line-1-5"></span>$ sudo /etc/init.d/apache2 restart</pre><span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><p class="line874">or <span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span></p><p class="line867"><span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span></p><pre><span class="anchor" id="line-1-6"></span>$ sudo service apache2 restart</pre><span class="anchor" id="line-62"></span><p class="line867">
</p><h3 id="Checking_Apache_2_installation">Checking Apache 2 installation</h3>
<span class="anchor" id="line-63"></span><span class="anchor" id="line-64"></span><p class="line862">With your web browser, go to the URI <strong>http</strong>://localhost : if you read "It works!", which is the content of the file /var/www/index.html , this proves Apache works. <span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span></p><p class="line867">
</p><h3 id="Troubleshooting_Apache">Troubleshooting Apache</h3>
<span class="anchor" id="line-67"></span><p class="line874">If you get this error: <span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span></p><p class="line867"><em>apache2: Could not determine the server's fully qualified domain name, using 127.0.0.1 for <a class="nonexistent" href="https://help.ubuntu.com/community/ServerName">ServerName</a></em> <span class="anchor" id="line-70"></span><span class="anchor" id="line-71"></span></p><p class="line874">then use a text editor such as "sudo nano" at the command line or "gksudo gedit" on the desktop to create a new file, <span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span><span class="anchor" id="line-74"></span></p><pre><span class="anchor" id="line-1-7"></span>$ sudo nano /etc/apache2/conf.d/fqdn</pre><span class="anchor" id="line-75"></span><p class="line874">or <span class="anchor" id="line-76"></span><span class="anchor" id="line-77"></span><span class="anchor" id="line-78"></span></p><pre><span class="anchor" id="line-1-8"></span>$ gksu "gedit /etc/apache2/conf.d/fqdn"</pre><span class="anchor" id="line-79"></span><p class="line874">then add <span class="anchor" id="line-80"></span><span class="anchor" id="line-81"></span><span class="anchor" id="line-82"></span></p><pre><span class="anchor" id="line-1-9"></span>ServerName localhost</pre><span class="anchor" id="line-83"></span><p class="line874">to the file and save.  This can all be done in a single command with the following: <span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span><span class="anchor" id="line-86"></span></p><pre><span class="anchor" id="line-1-10"></span>$ echo "ServerName localhost" | sudo tee /etc/apache2/conf.d/fqdn</pre><span class="anchor" id="line-87"></span><span class="anchor" id="line-88"></span><p class="line867">
</p><h3 id="Virtual_Hosts">Virtual Hosts</h3>
<span class="anchor" id="line-89"></span><p class="line862">Apache2 has the concept of sites, which are separate configuration files that Apache2 will read. These are available in <tt>/etc/apache2/sites-available</tt>. By default, there is one site available called <em>default</em> this is what you will see when you browse to <a class="http" href="http://localhost/">http://localhost</a> or <a class="http" href="http://127.0.0.1/">http://127.0.0.1</a>. You can have many different site configurations available, and activate only those that you need. <span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span><span class="anchor" id="line-92"></span></p><p class="line862">As an example, we want the default site to be <tt>/home/user/public_html/</tt>. To do this, we must create a new site and then enable it in Apache2. <span class="anchor" id="line-93"></span><span class="anchor" id="line-94"></span></p><p class="line874">To create a new site: <span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span></p><ul><li><p class="line862">Copy the default website as a starting point. <tt>sudo&nbsp;cp&nbsp;/etc/apache2/sites-available/default&nbsp;/etc/apache2/sites-available/mysite&nbsp;</tt> <span class="anchor" id="line-97"></span></p></li><li><p class="line862">Edit the new configuration file in a text editor "sudo nano" on the command line or "gksudo gedit", for example: <tt>gksudo&nbsp;gedit&nbsp;/etc/apache2/sites-available/mysite</tt> <span class="anchor" id="line-98"></span></p></li><li><p class="line862">Change the <tt>DocumentRoot</tt> to point to the new location. For example, <tt>/home/user/public_html/</tt> <span class="anchor" id="line-99"></span></p></li><li><p class="line862">Change the <tt>Directory</tt> directive, replace <tt>&lt;Directory&nbsp;/var/www/&gt;</tt> to <tt>&lt;Directory&nbsp;/home/user/public_html/&gt;</tt> <span class="anchor" id="line-100"></span></p></li><li><p class="line891"><em>You can also set separate logs for each site. To do this, change the <tt>ErrorLog</tt> and <tt>CustomLog</tt> directives. This is optional, but handy if you have many sites</em> <span class="anchor" id="line-101"></span></p></li><li>Save the file <span class="anchor" id="line-102"></span><span class="anchor" id="line-103"></span></li></ul><p class="line862">Now,
 we must deactivate the old site, and activate our new one. Ubuntu 
provides two small utilities that take care of this: a2ensite (<strong>a</strong>pache<strong>2en</strong>able <strong>site</strong>) and a2dissite (<strong>a</strong>pache<strong>2dis</strong>able <strong>site</strong>). <span class="anchor" id="line-104"></span><span class="anchor" id="line-105"></span></p><p class="line867"><span class="anchor" id="line-106"></span><span class="anchor" id="line-107"></span></p><pre><span class="anchor" id="line-1-11"></span>$ sudo a2dissite default &amp;&amp; sudo a2ensite mysite</pre><span class="anchor" id="line-108"></span><span class="anchor" id="line-109"></span><p class="line874">Finally, we restart Apache2: <span class="anchor" id="line-110"></span><span class="anchor" id="line-111"></span></p><p class="line867"><span class="anchor" id="line-112"></span><span class="anchor" id="line-113"></span></p><pre><span class="anchor" id="line-1-12"></span>$ sudo /etc/init.d/apache2 restart</pre><span class="anchor" id="line-114"></span><span class="anchor" id="line-115"></span><p class="line867"><em>If you have not created <tt>/home/user/public_html/</tt>, you will receive an warning message</em> <span class="anchor" id="line-116"></span><span class="anchor" id="line-117"></span></p><p class="line862">To test the new site, create a file in <tt>/home/user/public_html/</tt>: <span class="anchor" id="line-118"></span><span class="anchor" id="line-119"></span></p><p class="line867"><span class="anchor" id="line-120"></span><span class="anchor" id="line-121"></span></p><pre><span class="anchor" id="line-1-13"></span>$ echo '&lt;b&gt;Hello! It is working!&lt;/b&gt;' &gt; /home/user/public_html/index.html</pre><span class="anchor" id="line-122"></span><span class="anchor" id="line-123"></span><p class="line862">Finally, browse to <a class="http" href="http://localhost/">http://localhost/</a> <span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span></p><p class="line867">
</p><h2 id="Installing_PHP_5">Installing PHP 5</h2>
<span class="anchor" id="line-126"></span><p class="line862">To only install PHP5. use <a href="https://help.ubuntu.com/community/InstallingSoftware">any method</a> to install the package <span class="anchor" id="line-127"></span><span class="anchor" id="line-128"></span></p><p class="line867"><span class="anchor" id="line-129"></span><span class="anchor" id="line-130"></span></p><pre><span class="anchor" id="line-1-14"></span>libapache2-mod-php5</pre><span class="anchor" id="line-131"></span><span class="anchor" id="line-132"></span><p class="line874">Enable this module by doing <span class="anchor" id="line-133"></span><span class="anchor" id="line-134"></span><span class="anchor" id="line-135"></span></p><pre><span class="anchor" id="line-1-15"></span>$ sudo a2enmod php5</pre><span class="anchor" id="line-136"></span><p class="line874">which creates a symbolic link  /etc/apache2/mods-enabled/php5 pointing to  /etc/apache2/mods-availble/php5 . <span class="anchor" id="line-137"></span><span class="anchor" id="line-138"></span></p><p class="line862">Except
 if you use deprecated PHP code beginning only by "&lt;?" instead of 
"&lt;?php" (which is highly inadvisable), open, as root, the file 
/etc/php5/apache2/php.ini , look for the line "<strong>short_open_tag</strong>
 = On", change it to "short_open_tag = Off" (not including the quotation
 marks) and add a line of comment (beginning by a semi-colon) giving the
 reason, the author and the date of this change. This way, if you later 
want some XML or XHTML file to be served as PHP, the "&lt;?xml" tag will
 be ignored by PHP instead of being seen as a PHP code mistake. <span class="anchor" id="line-139"></span><span class="anchor" id="line-140"></span></p><p class="line874">Relaunch Apache 2 again: <span class="anchor" id="line-141"></span><span class="anchor" id="line-142"></span></p><p class="line867"><span class="anchor" id="line-143"></span><span class="anchor" id="line-144"></span></p><pre><span class="anchor" id="line-1-16"></span>$ sudo service apache2 restart</pre><span class="anchor" id="line-145"></span><span class="anchor" id="line-146"></span><p class="line867">
</p><h3 id="Checking_PHP_5_installation">Checking PHP 5 installation</h3>
<span class="anchor" id="line-147"></span><span class="anchor" id="line-148"></span><p class="line862">In
 /var/www , create a text file called "test.php", grant the world (or, 
at least, Ubuntu user "apache") permission to read it, write in it the 
only line: "&lt;?php phpinfo(); ?&gt;" (without the quotation marks) 
then, with your web browser, go to the URI "<a class="http" href="http://localhost/test.php">http://localhost/test.php</a>": if you can see a description of PHP5 configuration, it proves PHP 5 works with Apache. <span class="anchor" id="line-149"></span><span class="anchor" id="line-150"></span></p><p class="line867">
</p><h3 id="Troubleshooting_PHP_5">Troubleshooting PHP 5</h3>
<span class="anchor" id="line-151"></span><span class="anchor" id="line-152"></span><p class="line862">Does your browser ask if you want to <strong>download the php</strong> file instead of displaying it?  If Apache is not actually parsing the php after you restarted it, install <tt>libapache2-mod-php5</tt>.  It is installed when you install the <tt>php5</tt> package, but may have been removed inadvertently by packages which need to run a different version of php. <span class="anchor" id="line-153"></span><span class="anchor" id="line-154"></span></p><p class="line862">If <tt>sudo&nbsp;a2enmod&nbsp;php5</tt> returns "$ This module does not exist!", you should purge (not just remove) the <tt>libapache2-mod-php5</tt> package and reinstall it. <span class="anchor" id="line-155"></span><span class="anchor" id="line-156"></span></p><p class="line874">Be
 sure to clear your browser's cache before testing your site again. To 
do this in Firefox 4: Edit → Preferences … Privacy → History: clear your
 recent history → Details : choose "Everything" in "Time range to clean"
 and check only "cache", then click on "Clear now". <span class="anchor" id="line-157"></span><span class="anchor" id="line-158"></span></p><p class="line862">Remember that, for Apache to be called, the URI in your web browser must begin with "<a class="http" href="http:///">http://</a>". If it begins with "<a class="file" href="file:///">file://</a>",
 then the file is read directly by the browser, without Apache, so you 
get (X)HTML and CSS, but no PHP. If you didn't configure any host alias 
or virtual host, then a local URI begins with "<a class="http" href="http://localhost/">http://localhost</a>", "<a class="http" href="http://127.0.0.1/">http://127.0.0.1</a>" or <a class="http" href="http:///">http://</a>" followed by your IP number. <span class="anchor" id="line-159"></span><span class="anchor" id="line-160"></span></p><p class="line862">If
 the problem persists, check your PHP file authorisations (it should be 
readable at least by Ubuntu user "apache"), and check if the PHP code is
 correct. For instance, copy your PHP file, replace your whole PHP file 
content by "&lt;?php phpinfo(); ?&gt;" (without the quotation marks): if
 you get the PHP test page in your web browser, then the problem is in 
your PHP code, not in Apache or PHP configuration nor in file 
permissions. If this doesn't work, then it is a problem of file 
authorisation, Apache or PHP configuration, cache not emptied, or Apache
 not running or not restarted. Use the display of that test file in your
 web browser to see the list of files influencing PHP behaviour. <span class="anchor" id="line-161"></span><span class="anchor" id="line-162"></span><span class="anchor" id="line-163"></span></p><p class="line867">
</p><h3 id="php.ini_development_vs._production">php.ini development vs. production</h3>
<span class="anchor" id="line-164"></span><span class="anchor" id="line-165"></span><p class="line862">After standard installation, php configuration file <em>/etc/php5/apache2/php.ini</em>
 is set so as "production settings" which means, among others, that no 
error messages are displayed. So if you e.g. make a syntax error in your
 php source file, apache server would return HTTP 500 error instead of 
displaying the php syntax error debug message. <span class="anchor" id="line-166"></span><span class="anchor" id="line-167"></span></p><p class="line874">If
 you want to debug your scripts, it might be better to use the 
"development" settings. Both development and production settings ini's 
are located in /usr/share/php5/ <span class="anchor" id="line-168"></span><span class="anchor" id="line-169"></span></p><p class="line867"><span class="anchor" id="line-170"></span><span class="anchor" id="line-171"></span><span class="anchor" id="line-172"></span></p><pre><span class="anchor" id="line-1-17"></span>/usr/share/php5/php.ini-development
<span class="anchor" id="line-2"></span>/usr/share/php5/php.ini-production</pre><span class="anchor" id="line-173"></span><p class="line874">so you can compare them and see the exact differences. <span class="anchor" id="line-174"></span><span class="anchor" id="line-175"></span></p><p class="line874">To make the "development" settings active, just backup your original php.ini <span class="anchor" id="line-176"></span><span class="anchor" id="line-177"></span><span class="anchor" id="line-178"></span></p><pre><span class="anchor" id="line-1-18"></span>sudo mv /etc/php5/apache2/php.ini /etc/php5/apache2/php.ini.bak</pre><span class="anchor" id="line-179"></span><span class="anchor" id="line-180"></span><p class="line874">and create a symlink to your desired settings: <span class="anchor" id="line-181"></span><span class="anchor" id="line-182"></span><span class="anchor" id="line-183"></span></p><pre><span class="anchor" id="line-1-19"></span>sudo cp -s /usr/share/php5/php.ini-development /etc/php5/apache2/php.ini</pre><span class="anchor" id="line-184"></span><span class="anchor" id="line-185"></span><p class="line862">or you may of course also edit the <em>/etc/php5/apache2/php.ini</em> directly on your own, if you wish. <span class="anchor" id="line-186"></span><span class="anchor" id="line-187"></span><span class="anchor" id="line-188"></span><span class="anchor" id="line-189"></span></p><p class="line867">
</p><h3 id="PHP_in_user_directories">PHP in user directories</h3>
<span class="anchor" id="line-190"></span><span class="anchor" id="line-191"></span><p class="line862">According to <a class="http" href="http://blag.borap.net/2010/05/04/re-enabling-php-in-user-directories-in-ubuntu-10-04/">this blog</a>, newer versions of Ubuntu do <strong>not</strong> have PHP enabled by default for user directories (your <tt class="backtick">public_html</tt> folder).  See the blog for instructions on how to change this back. <span class="anchor" id="line-192"></span><span class="anchor" id="line-193"></span></p><p class="line867">
</p><h2 id="Installing_MYSQL_with_PHP_5">Installing MYSQL with PHP 5</h2>
<span class="anchor" id="line-194"></span><span class="anchor" id="line-195"></span><p class="line862">Use <a href="https://help.ubuntu.com/community/InstallingSoftware">any method</a> to install <span class="anchor" id="line-196"></span><span class="anchor" id="line-197"></span></p><p class="line867"><span class="anchor" id="line-198"></span><span class="anchor" id="line-199"></span></p><pre><span class="anchor" id="line-1-20"></span>mysql-server libapache2-mod-auth-mysql php5-mysql</pre><span class="anchor" id="line-200"></span><span class="anchor" id="line-201"></span><span class="anchor" id="line-202"></span><span class="anchor" id="line-203"></span><p class="line867">
</p><h2 id="After_installing_PHP">After installing PHP</h2>
<span class="anchor" id="line-204"></span><span class="anchor" id="line-205"></span><p class="line862">You
 may need to increase the memory limit that PHP imposes on a script.  
Edit the /etc/php5/apache2/php.ini file and increase the <em>memory_limit</em> value. <span class="anchor" id="line-206"></span><span class="anchor" id="line-207"></span><span class="anchor" id="line-208"></span></p><p class="line867">
</p><h2 id="After_installing_MySQL">After installing MySQL</h2>
<span class="anchor" id="line-209"></span><span class="anchor" id="line-210"></span><p class="line867">
</p><h3 id="Set_mysql_bind_address">Set mysql bind address</h3>
<span class="anchor" id="line-211"></span><span class="anchor" id="line-212"></span><p class="line862">Before you can access the database <strong>from other</strong> computers in your network, you have to change its bind address. <span class="anchor" id="line-213"></span><strong>Note that this can be a security problem, because your database can be accessed by other computers than your own. <span class="anchor" id="line-214"></span>Skip this step if the applications which require mysql are running on the same machine.</strong> <span class="anchor" id="line-215"></span><span class="anchor" id="line-216"></span></p><p class="line874">type: <span class="anchor" id="line-217"></span><span class="anchor" id="line-218"></span><span class="anchor" id="line-219"></span></p><pre><span class="anchor" id="line-1-21"></span>$ sudo nano /etc/mysql/my.cnf</pre><span class="anchor" id="line-220"></span><span class="anchor" id="line-221"></span><p class="line874">and change the line: <span class="anchor" id="line-222"></span><span class="anchor" id="line-223"></span><span class="anchor" id="line-224"></span></p><pre><span class="anchor" id="line-1-22"></span>bind-address           = localhost</pre><span class="anchor" id="line-225"></span><p class="line874">to your own internal ip address e.g. 192.168.1.20 <span class="anchor" id="line-226"></span><span class="anchor" id="line-227"></span><span class="anchor" id="line-228"></span></p><pre><span class="anchor" id="line-1-23"></span>bind-address           = 192.168.1.20</pre><span class="anchor" id="line-229"></span><span class="anchor" id="line-230"></span><p class="line874">If your ip address is dynamic you can also comment out the bind-address line and it will default to your current ip. <span class="anchor" id="line-231"></span><span class="anchor" id="line-232"></span></p><p class="line874">If you try to connect without changing the bind-address you will recieve a "Can not connect to mysql error 10061". <span class="anchor" id="line-233"></span><span class="anchor" id="line-234"></span></p><p class="line867">
</p><h3 id="Set_mysql_root_password">Set mysql root password</h3>
<span class="anchor" id="line-235"></span><span class="anchor" id="line-236"></span><p class="line874">Before accessing the database by console you need to type: <span class="anchor" id="line-237"></span><span class="anchor" id="line-238"></span><span class="anchor" id="line-239"></span></p><pre><span class="anchor" id="line-1-24"></span>$ mysql -u root</pre><span class="anchor" id="line-240"></span><span class="anchor" id="line-241"></span><p class="line874">At the mysql console type: <span class="anchor" id="line-242"></span><span class="anchor" id="line-243"></span><span class="anchor" id="line-244"></span></p><pre><span class="anchor" id="line-1-25"></span>$ mysql&gt; SET PASSWORD FOR 'root'@'localhost' = PASSWORD('yourpassword');</pre><span class="anchor" id="line-245"></span><span class="anchor" id="line-246"></span><p class="line874">A successful mysql command will show: <span class="anchor" id="line-247"></span><span class="anchor" id="line-248"></span></p><p class="line867"><em>Query OK, 0 rows affected (0.00 sec) </em> <span class="anchor" id="line-249"></span><span class="anchor" id="line-250"></span></p><p class="line874">Mysql commands can span several lines.  Do not forget to end your mysql command with a semicolon. <span class="anchor" id="line-251"></span><span class="anchor" id="line-252"></span></p><p class="line867"><strong>Note:</strong>  If you have already set a password for the mysql root, you will need to use: <span class="anchor" id="line-253"></span><span class="anchor" id="line-254"></span><span class="anchor" id="line-255"></span></p><pre><span class="anchor" id="line-1-26"></span>$ mysql -u root -p</pre><span class="anchor" id="line-256"></span><p class="line862">(Did you forget the mysql-root password?  See <a href="https://help.ubuntu.com/community/MysqlPasswordReset">MysqlPasswordReset</a>.) <span class="anchor" id="line-257"></span><span class="anchor" id="line-258"></span></p><p class="line867">
</p><h3 id="Create_a_mysql_database">Create a mysql database</h3>
<span class="anchor" id="line-259"></span><span class="anchor" id="line-260"></span><p class="line867"><span class="anchor" id="line-261"></span><span class="anchor" id="line-262"></span></p><pre><span class="anchor" id="line-1-27"></span>$ mysql&gt; CREATE DATABASE database1;</pre><span class="anchor" id="line-263"></span><span class="anchor" id="line-264"></span><p class="line867">
</p><h3 id="Create_a_mysql_user">Create a mysql user</h3>
<span class="anchor" id="line-265"></span><span class="anchor" id="line-266"></span><p class="line874">For creating a new user with all privileges (use only for troubleshooting), at mysql prompt type: <span class="anchor" id="line-267"></span><span class="anchor" id="line-268"></span><span class="anchor" id="line-269"></span></p><pre><span class="anchor" id="line-1-28"></span>$ mysql&gt; GRANT ALL PRIVILEGES ON *.* TO 'yourusername'@'localhost' IDENTIFIED BY 'yourpassword' WITH GRANT OPTION;</pre><span class="anchor" id="line-270"></span><span class="anchor" id="line-271"></span><p class="line874">For
 creating a new user with fewer privileges (should work for most web 
applications) which can only use the database named "database1", at 
mysql prompt type: <span class="anchor" id="line-272"></span><span class="anchor" id="line-273"></span><span class="anchor" id="line-274"></span></p><pre><span class="anchor" id="line-1-29"></span>$ mysql&gt; GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES ON database1.* TO 'yourusername'@'localhost' IDENTIFIED BY 'yourpassword';</pre><span class="anchor" id="line-275"></span><span class="anchor" id="line-276"></span><p class="line867"><em>yourusername</em> and <em>yourpassword</em> can be anything you like. <em>database1</em> is the name of the database the user gets access to. <em>localhost</em>
 is the location which gets access to your database. You can change it 
to '%' (or to hostnames or ip addresses) to allow connections from every
 location (or only from specific locations) to the database. <strong>Note, that this can be a security problem and should only be used for testing purposes!</strong> <span class="anchor" id="line-277"></span><span class="anchor" id="line-278"></span><span class="anchor" id="line-279"></span></p><p class="line874">To exit the mysql prompt type: <span class="anchor" id="line-280"></span><span class="anchor" id="line-281"></span><span class="anchor" id="line-282"></span></p><pre><span class="anchor" id="line-1-30"></span>$ mysql&gt; \q</pre><span class="anchor" id="line-283"></span><span class="anchor" id="line-284"></span><p class="line874">Since the mysql root password is now set, if you need to use mysql again (as the mysql root), you will need to use: <span class="anchor" id="line-285"></span><span class="anchor" id="line-286"></span><span class="anchor" id="line-287"></span></p><pre><span class="anchor" id="line-1-31"></span>$ mysql -u root -p</pre><span class="anchor" id="line-288"></span><span class="anchor" id="line-289"></span><p class="line874">and then enter the password at the prompt. <span class="anchor" id="line-290"></span><span class="anchor" id="line-291"></span></p><p class="line867">
</p><h3 id="Backup-Settings">Backup-Settings</h3>
<span class="anchor" id="line-292"></span><span class="anchor" id="line-293"></span><p class="line874">Please, let's say something in which directories mysql stores the database information and how to configure a backup <span class="anchor" id="line-294"></span><span class="anchor" id="line-295"></span></p><p class="line867">
</p><h3 id="Alternatively">Alternatively</h3>
<span class="anchor" id="line-296"></span><p class="line862">There is more than just one way to set the mysql root password and create a database.  For example <strong>mysqladmin</strong> can be used: <span class="anchor" id="line-297"></span><span class="anchor" id="line-298"></span></p><p class="line867"><span class="anchor" id="line-299"></span><span class="anchor" id="line-300"></span></p><pre><span class="anchor" id="line-1-32"></span>$ mysqladmin -u root -p password yourpassword</pre><span class="anchor" id="line-301"></span><span class="anchor" id="line-302"></span><p class="line874">and <span class="anchor" id="line-303"></span><span class="anchor" id="line-304"></span></p><p class="line867"><span class="anchor" id="line-305"></span><span class="anchor" id="line-306"></span></p><pre><span class="anchor" id="line-1-33"></span>$ mysqladmin -u root -p create database1</pre><span class="anchor" id="line-307"></span><span class="anchor" id="line-308"></span><p class="line867"><em>mysqladmin</em> is a command-line tool provided by the default LAMP install. <span class="anchor" id="line-309"></span><span class="anchor" id="line-310"></span></p><p class="line867">
</p><h2 id="Phpmyadmin_and_mysql-admin">Phpmyadmin and mysql-admin</h2>
<span class="anchor" id="line-311"></span><span class="anchor" id="line-312"></span><p class="line862">All mysql tasks including setting the root password and creating databases can be done via a graphical interface using <strong>phpmyadmin</strong> or <strong>mysql-admin</strong>. <span class="anchor" id="line-313"></span><span class="anchor" id="line-314"></span></p><p class="line874">To install one or both of them, first enable the universe repository <span class="anchor" id="line-315"></span><span class="anchor" id="line-316"></span><span class="anchor" id="line-317"></span></p><ul><li><p class="line891"><a href="https://help.ubuntu.com/community/Repositories/CommandLine">I am using Ubuntu server (command line)</a> <span class="anchor" id="line-318"></span></p></li><li><p class="line891"><a href="https://help.ubuntu.com/community/AddingRepositoriesHowto">I am using a desktop</a> <span class="anchor" id="line-319"></span><span class="anchor" id="line-320"></span></p></li></ul><p class="line862">Use <a href="https://help.ubuntu.com/community/InstallingSoftware">any method</a> to install <span class="anchor" id="line-321"></span><span class="anchor" id="line-322"></span></p><p class="line867"><span class="anchor" id="line-323"></span><span class="anchor" id="line-324"></span></p><pre><span class="anchor" id="line-1-34"></span>phpmyadmin</pre><span class="anchor" id="line-325"></span><span class="anchor" id="line-326"></span><span class="anchor" id="line-327"></span><span class="anchor" id="line-328"></span><p class="line867">
</p><h3 id="Troubleshooting_Phpmyadmin_.26_mysql-admin">Troubleshooting Phpmyadmin &amp; mysql-admin</h3>
<span class="anchor" id="line-329"></span><p class="line867"><strong>If you get blowfish_secret error:</strong> <span class="anchor" id="line-330"></span>Choose
 and set a phrase for cryptography in the file 
/etc/phpmyadmin/blowfish_secret.inc.php  and copy the line (not the php 
tags) into the file /etc/phpmyadmin/config.inc.php or you will receive 
an error. <span class="anchor" id="line-331"></span><span class="anchor" id="line-332"></span></p><p class="line867"><strong>If you get a 404 error upon visiting <a class="http" href="http://localhost/phpmyadmin">http://localhost/phpmyadmin</a>:</strong> <span class="anchor" id="line-333"></span>You will need to configure apache2.conf to work with Phpmyadmin. <span class="anchor" id="line-334"></span><span class="anchor" id="line-335"></span></p><p class="line867"><span class="anchor" id="line-336"></span><span class="anchor" id="line-337"></span></p><pre><span class="anchor" id="line-1-35"></span>$ sudo gedit /etc/apache2/apache2.conf</pre><span class="anchor" id="line-338"></span><span class="anchor" id="line-339"></span><p class="line874">Include the following line at the bottom of the file, save and quit. <span class="anchor" id="line-340"></span><span class="anchor" id="line-341"></span></p><p class="line867"><span class="anchor" id="line-342"></span><span class="anchor" id="line-343"></span></p><pre><span class="anchor" id="line-1-36"></span>$ Include /etc/phpmyadmin/apache.conf</pre><span class="anchor" id="line-344"></span><span class="anchor" id="line-345"></span><p class="line867">
</p><h3 id="Alternative:_install_phpMyAdmin_from_source">Alternative: install phpMyAdmin from source</h3>
<span class="anchor" id="line-346"></span><p class="line862">See the <a class="https" href="https://help.ubuntu.com/community/phpMyAdmin">phpMyAdmin</a> page for instructions on how to install phpmyadmin from source: <span class="anchor" id="line-347"></span><span class="anchor" id="line-348"></span></p><p class="line867">
</p><h3 id="Mysql-admin">Mysql-admin</h3>
<span class="anchor" id="line-349"></span><p class="line862">Mysql-admin runs locally, on the desktop.  Use <a href="https://help.ubuntu.com/community/InstallingSoftware">any method</a> to install <span class="anchor" id="line-350"></span><span class="anchor" id="line-351"></span></p><p class="line867"><span class="anchor" id="line-352"></span><span class="anchor" id="line-353"></span></p><pre><span class="anchor" id="line-1-37"></span>mysql-admin</pre><span class="anchor" id="line-354"></span><span class="anchor" id="line-355"></span><p class="line867">
</p><h3 id="For_more_information">For more information</h3>
<span class="anchor" id="line-356"></span><p class="line867"><a class="http" href="http://dev.mysql.com/doc/mysql/en/default-privileges.html">2.9.3. Securing the Initial MySQL Accounts</a> from the <a class="http" href="http://dev.mysql.com/doc/mysql/en/index.html">MySQL Reference Manual</a> is worth reading. <span class="anchor" id="line-357"></span><span class="anchor" id="line-358"></span><span class="anchor" id="line-359"></span></p><p class="line867">
</p><h2 id="Edit_Apache_Configuration">Edit Apache Configuration</h2>
<span class="anchor" id="line-360"></span><p class="line874">You may want your current user to be the PHP pages administrator. To do so, edit the Apache configuration file : <span class="anchor" id="line-361"></span><span class="anchor" id="line-362"></span><span class="anchor" id="line-363"></span></p><pre><span class="anchor" id="line-1-38"></span>$ gksudo "gedit /etc/apache2/apache2.conf"</pre><span class="anchor" id="line-364"></span><p class="line874">Search
 both the strings starting by "User" and "Group", and change the names 
by the current username and groupname you are using. <span class="anchor" id="line-365"></span>Then you'll need to restart Apache. (look at the next chapter concerning apache commands) <span class="anchor" id="line-366"></span><span class="anchor" id="line-367"></span></p><p class="line874">Configuration
 options relating specifically to user websites (accessed through 
localhost/~username) are in /etc/apache2/mods-enabled/userdir.conf. <span class="anchor" id="line-368"></span><span class="anchor" id="line-369"></span><span class="anchor" id="line-370"></span></p><p class="line867">
</p><h2 id="Installing_suPHP">Installing suPHP</h2>
<span class="anchor" id="line-371"></span><span class="anchor" id="line-372"></span><p class="line874">suPHP
 is a tool for executing PHP scripts with the permissions of their 
owners. It consists of an Apache module (mod_suphp) and a setuid root 
binary (suphp) that is called by the Apache module to change the uid of 
the process executing the PHP interpreter. <span class="anchor" id="line-373"></span><span class="anchor" id="line-374"></span></p><p class="line874">Note:
 suPHP enforces, security and helps avoid file permission problems under
 development environments with several users editing the site files, but
 it also demands more memory and CPU usage, which can degrade your 
server performance under certain circumstances. <span class="anchor" id="line-375"></span><span class="anchor" id="line-376"></span></p><p class="line862">To only install suPHP. use <a href="https://help.ubuntu.com/community/InstallingSoftware">any method</a> to install the package <span class="anchor" id="line-377"></span><span class="anchor" id="line-378"></span></p><p class="line867"><span class="anchor" id="line-379"></span><span class="anchor" id="line-380"></span></p><pre><span class="anchor" id="line-1-39"></span>libapache2-mod-suphp</pre><span class="anchor" id="line-381"></span><span class="anchor" id="line-382"></span><p class="line874">Enable this module by doing <span class="anchor" id="line-383"></span><span class="anchor" id="line-384"></span></p><p class="line867"><span class="anchor" id="line-385"></span><span class="anchor" id="line-386"></span></p><pre><span class="anchor" id="line-1-40"></span>sudo a2enmod suphp</pre><span class="anchor" id="line-387"></span><span class="anchor" id="line-388"></span><p class="line874">then use a text editor such as "sudo nano" at the command line or "gksudo gedit" on the desktop to edit this file <span class="anchor" id="line-389"></span><span class="anchor" id="line-390"></span></p><p class="line867"><span class="anchor" id="line-391"></span><span class="anchor" id="line-392"></span></p><pre><span class="anchor" id="line-1-41"></span>sudo nano /etc/apache2/mods-available/php5.conf</pre><span class="anchor" id="line-393"></span><span class="anchor" id="line-394"></span><p class="line874">or <span class="anchor" id="line-395"></span><span class="anchor" id="line-396"></span></p><p class="line867"><span class="anchor" id="line-397"></span><span class="anchor" id="line-398"></span></p><pre><span class="anchor" id="line-1-42"></span>gksu "gedit /etc/apache2/mods-available/php5.conf"</pre><span class="anchor" id="line-399"></span><span class="anchor" id="line-400"></span><p class="line874">make a new empty line at the top of the content, then add <span class="anchor" id="line-401"></span><span class="anchor" id="line-402"></span></p><p class="line867"><span class="anchor" id="line-403"></span><span class="anchor" id="line-404"></span></p><pre><span class="anchor" id="line-1-43"></span>&lt;Directory /usr/share&gt;</pre><span class="anchor" id="line-405"></span><span class="anchor" id="line-406"></span><p class="line874">make a new empty line at the bottom of the content, then add <span class="anchor" id="line-407"></span><span class="anchor" id="line-408"></span></p><p class="line867"><span class="anchor" id="line-409"></span><span class="anchor" id="line-410"></span></p><pre><span class="anchor" id="line-1-44"></span>&lt;/Directory&gt;</pre><span class="anchor" id="line-411"></span><span class="anchor" id="line-412"></span><p class="line874">save changes <span class="anchor" id="line-413"></span><span class="anchor" id="line-414"></span></p><p class="line874">For
 security reasons we need to specify to suPHP what are the document 
paths allowed to execute scripts, use a text editor such as "sudo nano" 
at the command line or "gksudo gedit" on the desktop to edit this file <span class="anchor" id="line-415"></span><span class="anchor" id="line-416"></span></p><p class="line867"><span class="anchor" id="line-417"></span><span class="anchor" id="line-418"></span></p><pre><span class="anchor" id="line-1-45"></span>sudo nano /etc/suphp/suphp.conf</pre><span class="anchor" id="line-419"></span><span class="anchor" id="line-420"></span><p class="line874">or <span class="anchor" id="line-421"></span><span class="anchor" id="line-422"></span></p><p class="line867"><span class="anchor" id="line-423"></span><span class="anchor" id="line-424"></span><span class="anchor" id="line-425"></span><span class="anchor" id="line-426"></span></p><pre><span class="anchor" id="line-1-46"></span>gksu "gedit /etc/suphp/suphp.conf</pre><span class="anchor" id="line-427"></span><span class="anchor" id="line-428"></span><p class="line874">find the value "docroot" and specify the document path of your site files, for example: <span class="anchor" id="line-429"></span><span class="anchor" id="line-430"></span></p><p class="line867"><span class="anchor" id="line-431"></span><span class="anchor" id="line-432"></span></p><pre><span class="anchor" id="line-1-47"></span>docroot=/var/www/</pre><span class="anchor" id="line-433"></span><span class="anchor" id="line-434"></span><p class="line874">that value restrict script execution only to files inside "/var/www/" <span class="anchor" id="line-435"></span><span class="anchor" id="line-436"></span></p><p class="line867"><span class="anchor" id="line-437"></span><span class="anchor" id="line-438"></span></p><pre><span class="anchor" id="line-1-48"></span>docroot=/var/www/:${HOME}/public_html</pre><span class="anchor" id="line-439"></span><span class="anchor" id="line-440"></span><p class="line874">that
 value restrict script execution only to files inside a custom home 
folder for each configured user inside "/var/www/:${HOME}/public_html" <span class="anchor" id="line-441"></span><span class="anchor" id="line-442"></span></p><p class="line874">for this tutorial we are going to use this value <span class="anchor" id="line-443"></span><span class="anchor" id="line-444"></span></p><p class="line867"><span class="anchor" id="line-445"></span><span class="anchor" id="line-446"></span></p><pre><span class="anchor" id="line-1-49"></span>docroot=/home/user/public_html/</pre><span class="anchor" id="line-447"></span><span class="anchor" id="line-448"></span><p class="line874">which is the same Apache directory directive set before in this document <span class="anchor" id="line-449"></span><span class="anchor" id="line-450"></span></p><p class="line874">save changes <span class="anchor" id="line-451"></span><span class="anchor" id="line-452"></span></p><p class="line874">to restart Apache, type in your terminal <span class="anchor" id="line-453"></span><span class="anchor" id="line-454"></span></p><p class="line867"><span class="anchor" id="line-455"></span><span class="anchor" id="line-456"></span></p><pre><span class="anchor" id="line-1-50"></span>sudo /etc/init.d/apache2 restart</pre><span class="anchor" id="line-457"></span><span class="anchor" id="line-458"></span><p class="line874">Now lets create a test script to see if suPHP is working correctly, in your terminal type <span class="anchor" id="line-459"></span><span class="anchor" id="line-460"></span></p><p class="line867"><span class="anchor" id="line-461"></span><span class="anchor" id="line-462"></span></p><pre><span class="anchor" id="line-1-51"></span>echo "&lt;?php echo 'whoim = '.exec('/usr/bin/whoami');?&gt;" | tee /home/user/public_html/whomi.php</pre><span class="anchor" id="line-463"></span><span class="anchor" id="line-464"></span><p class="line874">that command creates a quick php test file to display the current user executing the script <span class="anchor" id="line-465"></span><span class="anchor" id="line-466"></span></p><p class="line874">open
 your browser and navigate to "localhost/whomi.php", most likely the 
browser will show you a "500" server error, this is because suPHP does 
not allow too permissive file and folder permissions and also does not 
allow mixed file and folder ownership, to correct this type in your 
terminal <span class="anchor" id="line-467"></span><span class="anchor" id="line-468"></span></p><p class="line867"><span class="anchor" id="line-469"></span><span class="anchor" id="line-470"></span><span class="anchor" id="line-471"></span><span class="anchor" id="line-472"></span></p><pre><span class="anchor" id="line-1-52"></span>sudo find /home/user/public_html/ -type f -exec chmod 644 {} \;
<span class="anchor" id="line-2-1"></span>sudo find /home/user/public_html/ -type d -exec chmod 755 {} \;
<span class="anchor" id="line-3"></span>sudo chown user:group -R /home/user/public_html/</pre><span class="anchor" id="line-473"></span><span class="anchor" id="line-474"></span><p class="line874">those
 commands enforce a secure and correct file and folder permission and 
also set a correct user and group ownership for all of them <span class="anchor" id="line-475"></span><span class="anchor" id="line-476"></span></p><p class="line874">Now
 open your browser and navigate to "localhost/whomi.php", if everything 
went fine you should see the name of the file owner executing the script
 and not "www-data" unless you specified so <span class="anchor" id="line-477"></span><span class="anchor" id="line-478"></span></p><p class="line867">
</p><h2 id="Run.2C_Stop.2C_Test.2C_And_Restart_Apache">Run, Stop, Test, And Restart Apache</h2>
<span class="anchor" id="line-479"></span><p class="line874">Use the following command to run Apache : <span class="anchor" id="line-480"></span><span class="anchor" id="line-481"></span><span class="anchor" id="line-482"></span></p><pre><span class="anchor" id="line-1-53"></span>$ sudo /usr/sbin/apache2ctl start</pre><span class="anchor" id="line-483"></span><p class="line874">To stop it, use : <span class="anchor" id="line-484"></span><span class="anchor" id="line-485"></span><span class="anchor" id="line-486"></span></p><pre><span class="anchor" id="line-1-54"></span>$ sudo /usr/sbin/apache2ctl stop</pre><span class="anchor" id="line-487"></span><p class="line874">To test configuration changes, use : <span class="anchor" id="line-488"></span><span class="anchor" id="line-489"></span><span class="anchor" id="line-490"></span></p><pre><span class="anchor" id="line-1-55"></span>$ sudo /usr/sbin/apache2ctl configtest</pre><span class="anchor" id="line-491"></span><p class="line874">Finally, to restart it, run : <span class="anchor" id="line-492"></span><span class="anchor" id="line-493"></span><span class="anchor" id="line-494"></span></p><pre><span class="anchor" id="line-1-56"></span>$ sudo /usr/sbin/apache2ctl restart</pre><span class="anchor" id="line-495"></span><span class="anchor" id="line-496"></span><p class="line862">Alternatively, you can use a graphical interface by installing <a class="https" href="https://launchpad.net/rapache">Rapache</a> or the simpler <a class="https" href="https://launchpad.net/localhost-indicator">localhost-indicator</a>. <span class="anchor" id="line-497"></span>
</p><h2 id="Using_Apache">Using Apache</h2>
<span class="anchor" id="line-498"></span><p class="line862">You can access apache by typing 127.0.0.1 or <a class="http" href="http://localhost/">http://localhost</a> (by default it will be listening on port 80) in your browser address bar. <span class="anchor" id="line-499"></span>By default the directory for apache server pages is /var/www . <span class="anchor" id="line-500"></span>It needs root access in order to put files in. A way to do it is just starting the file browser as root in a terminal: <span class="anchor" id="line-501"></span><span class="anchor" id="line-502"></span><span class="anchor" id="line-503"></span></p><pre><span class="anchor" id="line-1-57"></span>$ sudo nautilus</pre><span class="anchor" id="line-504"></span><span class="anchor" id="line-505"></span><p class="line874">or <span class="anchor" id="line-506"></span><span class="anchor" id="line-507"></span></p><p class="line874">if
 you want to make /var/www your own. (Use only for non-production web 
servers - this is not the most secure way to do things.) <span class="anchor" id="line-508"></span><span class="anchor" id="line-509"></span><span class="anchor" id="line-510"></span></p><pre><span class="anchor" id="line-1-58"></span>$ sudo chown -R $USER:$USER /var/www</pre><span class="anchor" id="line-511"></span><span class="anchor" id="line-512"></span><p class="line867">
</p><h2 id="Status">Status</h2>
<span class="anchor" id="line-513"></span><p class="line874">To check the status of your PHP installation: <span class="anchor" id="line-514"></span><span class="anchor" id="line-515"></span><span class="anchor" id="line-516"></span></p><pre><span class="anchor" id="line-1-59"></span> $ gksudo "gedit /var/www/testphp.php"</pre><span class="anchor" id="line-517"></span><p class="line874">and insert the following line <span class="anchor" id="line-518"></span><span class="anchor" id="line-519"></span><span class="anchor" id="line-520"></span></p><pre><span class="anchor" id="line-1-60"></span> &lt;?php phpinfo(); ?&gt;</pre><span class="anchor" id="line-521"></span><span class="anchor" id="line-522"></span><p class="line862">View this page on a web browser at <a class="http" href="http://yourserveripaddress/testphp.php">http://yourserveripaddress/testphp.php</a> or <a class="http" href="http://localhost/testphp.php">http://localhost/testphp.php</a> <span class="anchor" id="line-523"></span><span class="anchor" id="line-524"></span></p><p class="line867">
</p><h2 id="Securing_Apache">Securing Apache</h2>
<span class="anchor" id="line-525"></span><p class="line874">If you just
 want to run your Apache install as a development server and want to 
prevent it from listening for incoming connection attempts, this is easy
 to do. <span class="anchor" id="line-526"></span><span class="anchor" id="line-527"></span><span class="anchor" id="line-528"></span><span class="anchor" id="line-529"></span></p><pre><span class="anchor" id="line-1-61"></span>$ gksudo "gedit /etc/apache2/ports.conf"
<span class="anchor" id="line-2-2"></span>$ password:</pre><span class="anchor" id="line-530"></span><span class="anchor" id="line-531"></span><p class="line874">Change ports.conf so that it contains: <span class="anchor" id="line-532"></span><span class="anchor" id="line-533"></span><span class="anchor" id="line-534"></span></p><pre><span class="anchor" id="line-1-62"></span>Listen 127.0.0.1:80</pre><span class="anchor" id="line-535"></span><span class="anchor" id="line-536"></span><p class="line862">Save this file, and restart Apache (see above). Now Apache will serve only to your home domain, <a class="http" href="http://127.0.0.1/">http://127.0.0.1</a> or <a class="http" href="http://localhost/">http://localhost</a>. <span class="anchor" id="line-537"></span><span class="anchor" id="line-538"></span></p><p class="line867">
</p><h2 id="Password-Protect_a_Directory">Password-Protect a Directory</h2>
<span class="anchor" id="line-539"></span><span class="anchor" id="line-540"></span><p class="line874">There are 2 ways to password-protect a specific directory. <span class="anchor" id="line-541"></span>The recommended way involves editing <span class="anchor" id="line-542"></span><tt>&nbsp;/etc/apache2/apache2.conf&nbsp;</tt>. <span class="anchor" id="line-543"></span>(To do this, you need root access). <span class="anchor" id="line-544"></span>The other way involves editing a <tt>.htaccess</tt> file in the directory to be protected. <span class="anchor" id="line-545"></span>(To do this, you need access to that directory). <span class="anchor" id="line-546"></span><span class="anchor" id="line-547"></span></p><p class="line867">
</p><h3 id="Password-Protect_a_Directory_With_.htaccess">Password-Protect a Directory With .htaccess</h3>
<span class="anchor" id="line-548"></span><span class="anchor" id="line-549"></span><p class="line862">See <a href="https://help.ubuntu.com/community/EnablingUseOfApacheHtaccessFiles">EnablingUseOfApacheHtaccessFiles</a> <span class="anchor" id="line-550"></span><span class="anchor" id="line-551"></span></p><p class="line867"><strong>Warning: On at least some versions of Ubuntu, <tt>.htaccess</tt> files will not work by default. See <a href="https://help.ubuntu.com/community/EnablingUseOfApacheHtaccessFiles">EnablingUseOfApacheHtaccessFiles</a> for help on enabling them.</strong> <span class="anchor" id="line-552"></span><span class="anchor" id="line-553"></span></p><p class="line867">
</p><h2 id="thumbnails">thumbnails</h2>
<span class="anchor" id="line-554"></span><span class="anchor" id="line-555"></span><p class="line874">If you direct your web browser to a directory (rather than a specific file), <span class="anchor" id="line-556"></span>and there is no "index.html" file in that directory, <span class="anchor" id="line-557"></span>Apache will generate an index file on-the-fly listing all the files and folders in that directory. <span class="anchor" id="line-558"></span>Each folder has a little icon of a folder next to it. <span class="anchor" id="line-559"></span><span class="anchor" id="line-560"></span></p><p class="line874">To put a thumbnail of that specific image (rather than the generic "image icon") <span class="anchor" id="line-561"></span>next to each image file (.jpg, .png, etc.): <span class="anchor" id="line-562"></span><span class="anchor" id="line-563"></span></p><p class="line867"><em>... todo: add instructions on how to do thumbnails here, perhaps using <a class="http" href="http://aspn.activestate.com/ASPN/CodeDoc/Apache-AutoIndex/AutoIndex.html">Apache::AutoIndex 0.08</a> or <a class="http" href="http://aspn.activestate.com/ASPN/CodeDoc/Apache-Album/Album.html">Apache::Album 0.95</a> ... </em> <span class="anchor" id="line-564"></span><span class="anchor" id="line-565"></span><span class="anchor" id="line-566"></span></p><p class="line867">
</p><h2 id="Known_problems">Known problems</h2>
<span class="anchor" id="line-567"></span><span class="anchor" id="line-568"></span><p class="line867">
</p><h3 id="Skype_incompatibility">Skype incompatibility</h3>
<span class="anchor" id="line-569"></span><p class="line867"><a href="https://help.ubuntu.com/community/Skype">Skype</a>
 uses port 80 for incoming calls, and thus, may block Apache. The 
solution is to change the port in one of the applications. Usually, port
 81 is free and works fine. To change the port number in <a href="https://help.ubuntu.com/community/Skype">Skype</a>
 go to menu Tools &gt; Options, then click on the Advanced tab, then in 
the box of the port for incoming calls write your preference. <span class="anchor" id="line-570"></span><span class="anchor" id="line-571"></span></p><p class="line867">
</p><h2 id="Other_Apache_Options">Other Apache Options</h2>
<span class="anchor" id="line-572"></span><ul><li><p class="line891"><a href="https://help.ubuntu.com/community/ServerSideIncludes">ServerSideIncludes</a> - enable SSI in Apache2 <span class="anchor" id="line-573"></span></p></li><li><p class="line891"><a href="https://help.ubuntu.com/community/LocalhostSubdomain">LocalhostSubdomain</a> - access your local files as if you had different subdomains <span class="anchor" id="line-574"></span><span class="anchor" id="line-575"></span></p></li></ul><p class="line867">
</p><h2 id="Further_Information">Further Information</h2>
<span class="anchor" id="line-576"></span><ul><li><p class="line891"><a href="https://help.ubuntu.com/community/StrongPasswords">StrongPasswords</a> is recommended reading! <span class="anchor" id="line-577"></span></p></li><li><p class="line891"><a href="https://help.ubuntu.com/community/BastilleLinux">BastilleLinux</a> is also recommended if you're going to be running a live webserver. <span class="anchor" id="line-578"></span></p></li><li><p class="line862">You can compile <a class="nonexistent" href="https://help.ubuntu.com/community/PHP5FromSource">PHP5FromSource</a>, as well as <a href="https://help.ubuntu.com/community/MYSQL5FromSource">MYSQL5FromSource</a>. <span class="anchor" id="line-579"></span></p></li><li><p class="line891"><a href="https://help.ubuntu.com/community/PHPOracle">PHPOracle</a> will enable you to connect to Oracle databases. <span class="anchor" id="line-580"></span></p></li><li><p class="line891"><a href="https://help.ubuntu.com/community/PhpPear">PhpPear</a> : PHP Extension and Application Repository <span class="anchor" id="line-581"></span></p></li></ul><span class="anchor" id="bottom"></span></div><div id="pagebottom"></div>
</div>


            </div>
<p id="pageinfo" class="info" dir="ltr" lang="en">ApacheMySQLPHP  (last edited 2012-12-17 00:44:09 by <span title="crysman @ 151.134.broadband2.iol.cz[83.208.134.151]"><a class="interwiki" href="https://launchpad.net/%7Ecrysman" title="crysman @ 151.134.broadband2.iol.cz[83.208.134.151]">crysman</a></span>)</p>

</div>
            
            <div id="footer">
		<p>
		The material on this wiki is available under a free license, see <a href="https://help.ubuntu.com/community/License">Copyright / License</a> for details<br><b>You</b> can contribute to this wiki, see 
		<a href="https://help.ubuntu.com/community/WikiGuide">Wiki Guide</a> for details
		</p>
            </div>

        </div>


</body></html>